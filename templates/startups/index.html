{% load static %}
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
<script type="text/javascript" src="{% static 'jquery.js' %}"></script>
</head>
<body>
<div class="container">
<h1>Startup List</h1>
<br><br>
{% if messages %}
<div class="alert alert-warning">
  {% for message in messages %}
    <strong>{{ message }}</strong>
  {% endfor %}
</div>
{% endif %}
<ul class="list-group">
{% for s in startups_list %}
  <li class="list-group-item">
  <h4>{{ s.name }}&nbsp;
  <button class ="upvotes btn btn-success" id = "{{ s.id }}" data-catid="{{ s.id }}" type="button"><span class="glyphicon glyphicon-thumbs-up"></span></button>&nbsp;
  <button class ="downvotes btn btn-danger" id = "{{ s.id }}" data-catid="{{ s.id }}" type="button"><span class="glyphicon glyphicon-thumbs-down"></span></button>
  <span class="badge pull-right"><b class="vote_count" id="vote_{{ s.id }}">{{ s.votes }}</b></span>&nbsp;
  </li>
{% endfor %}
</ul>
</div>
<script type="text/javascript">
$('.upvotes').click(function(){
  var sid;
  sid = $(this).attr("data-catid");
  var tempid = "#vote_".concat(sid);
    $.get('/startups/upvote/', {s_id: sid}, function(data){
      $(tempid).html(data);
    });
});

$('.downvotes').click(function(){
  var sid;
  sid = $(this).attr("data-catid");
  var tempid = "#vote_".concat(sid);
    $.get('/startups/downvote/', {s_id: sid}, function(data){
      $(tempid).html(data);
    });
});
</script>
</body>
</html>
